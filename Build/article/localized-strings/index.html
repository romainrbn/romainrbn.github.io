<!doctype html><html lang="en" data-bs-theme="light"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Letâ€™s dive in the new Morphology and inflection APIs in Swift."><meta name="author" content="Romain Rabouan"><meta name="generator" content="Ignite v0.1.0"><title>Localized Strings are powerful â€“ Romain Rabouan - Portfolio</title><link href="/css/bootstrap.min.css" rel="stylesheet"><link href="/css/prism-default-dark.css" rel="stylesheet"><link href="/css/bootstrap-icons.min.css" rel="stylesheet"><link href="https://www.yoursite.com/article/localized-strings" rel="canonical"><meta property="og:site_name" content="Romain Rabouan"><meta property="og:image" content="/images/photos/localization.png"><meta property="twitter:image" content="/images/photos/localization.png"><meta property="og:title" content="Localized Strings are powerful"><meta property="twitter:title" content="Localized Strings are powerful"><meta property="og:description" content="Localized Strings are powerful"><meta name="twitter:description" content="Localized Strings are powerful"><meta property="og:url" content="https://www.yoursite.com/article/localized-strings"><meta name="twitter:domain" content="yoursite.com"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:dnt" content="on"></head><body class="container" style="padding-top: 140px; padding-bottom: 80px"><div class="col-sm-10 mx-auto"><header><nav class="fixed-top navbar navbar-expand-md" style="background-color: rgb(112 128 144 / 100%)" data-bs-theme="dark"><div class="container-fluid col"><a href="/" class="navbar-brand"><div style="text-align: left;">
<div style="display: block; font-size: 2rem; font-weight: bold;">Romain Rabouan</div>
<div style="display: block; font-size: 1.2rem; font-weight: medium;">Apple Platforms Software Engineer</div>
</div></a><button type="button" class="navbar-toggler btn" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div id="navbarCollapse" class="collapse navbar-collapse"><ul class="navbar-nav mb-2 mb-md-0 col justify-content-end"><li class="nav-item"><a href="resume.pdf" class="nav-link">Download my Resume</a></li><li class="nav-item"><a href="https://www.google.com/" class="nav-link">Projects</a></li><li class="nav-item"><a href="/blog-page" class="nav-link">Blog</a></li></ul></div></div></nav></header><h1>Localized Strings are powerful</h1><img src="/images/photos/localization.png"  class="img-fluid mx-auto text-center" style="border-radius: 20px; max-height: 300px"alt=""/><div><p>Tagged with: Localization</p><p>440 words; 2 minutes to read.</p></div><p><p>Letâ€™s dive in the new Morphology and inflection APIs in Swift.</p><h2>How can we have multiple usages of a String with only one Localization Key?</h2><p>Since iOS 15, Apple gives developers the opportunity to change a localized string depending on the context, without having to use StringsDict.</p><p>For example, now you can have:</p><pre><code class="language-swift">"Points: %lld" = "You have ^[%lld [Points]](inflect: true)";
</code></pre><p>This way, the string will adapt depending on the argument passed into %ldd</p><ul><li>%lld = 0 â‡’ You have 0 point</li><li>%lld = 1 â‡’ You have 1 point</li><li>%lld = 2 â‡’ You have 2 point<strong>s</strong></li></ul><p>And the good thing is that it changes automatically with the language. In french, we would have:</p><ul><li>%lld = 0 â‡’ You have 0 point<strong>s</strong> (because the 0 takes a <strong>s</strong> in french)etc.</li></ul><p>In case we are not sure that Foundation will detect which word is the name to adapt here, we can easily specify which word is the noun. For example, if we take back the above example:</p><pre><code class="language-swift">"Points: %lld" = "You have ^[%lld [Points](grammar: { partOfSpeech: \"noun\" })](inflect: true)";
</code></pre><p>This solution (compared to usual StringsDict) can be good for small project or developers, but it is only available for Apple Platforms, and so would be hard for us to implement in HealthMate. Moreover, having a syntax inside the .strings file can be a bit messy, and it is available only in French, English and Spanish for nowâ€¦)</p><h2>Morphologies</h2><p>Apple also introduced a new set of tools in the Foundation framework: Morphologies.</p><p>This allows us to use the above syntax even further.</p><p>Letâ€™s take an example in Swift:</p><pre><code class="language-swift">func buildPostLikeString() -> AttributedString {
	var string = AttributedString(localized: 
		"^[They liked your post](inflect: true, inflectionAlternative: 'She liked your post')"
	)
	var morphology = Morphology()
	morphology.grammaticalGender = .feminine
	string.inflect = InflectionRule(morphology: morphology)
	return string.inflected()
}
</code></pre><p>As you can see here, we can set an alternative string for the main string, using <code>inflectionAlternative</code></p><p>This can be used to change the string depending on the user choice of gender, like shown above. (Apple now asks about your gender of choice when you first start your iPhone).</p><p>You can even access the user gender with:</p><pre><code class="language-swift">let userGender = Morphology.user.grammaticalGender
</code></pre><p>and use it in your strings. ðŸŽ‰</p></p></div><script src="/js/bootstrap.bundle.min.js"></script><script src="/js/syntax-highlighting.js"></script></body></html>